# aiohttp benchmarks


Usage

```shell
virtualenv -p `which python3.6` env
. env/bin/activate
pip install -r requirements.setup.txt
export PGPASS=...
export PGUSER=...
./recreate_db.py
tox
```

## Results as of (16-02-17)

```
                 url   Py       DB  queries     Conc           1.2.0           1.3.1         2.0.0a0 
                 /db  3.5      orm        -       32           5,309     5,005 | -6%     6,125 | 15% 
                 /db  3.5      orm        -       64           5,417     5,133 | -5%     6,290 | 16% 
                 /db  3.5      orm        -      128           5,445     5,272 | -3%     6,305 | 16% 
                 /db  3.5      orm        -      256           5,584     5,387 | -4%     6,174 | 11% 
                 /db  3.5      raw        -       32           7,080     7,372 |  4%     9,728 | 37% 
                 /db  3.5      raw        -       64           7,617     7,486 | -2%    10,405 | 37% 
                 /db  3.5      raw        -      128           8,126     7,827 | -4%    10,635 | 31% 
                 /db  3.5      raw        -      256           8,043     7,933 | -1%    10,757 | 34% 

           /fortunes  3.5      orm        -       32           3,925     3,808 | -3%     3,803 | -3% 
           /fortunes  3.5      orm        -       64           4,390     4,283 | -2%     5,304 | 21% 
           /fortunes  3.5      orm        -      128           4,570     4,405 | -4%     5,421 | 19% 
           /fortunes  3.5      orm        -      256           4,589     4,514 | -2%     5,385 | 17% 
           /fortunes  3.5      raw        -       32           5,394     5,347 | -1%     6,548 | 21% 
           /fortunes  3.5      raw        -       64           5,914     5,593 | -5%     7,009 | 19% 
           /fortunes  3.5      raw        -      128           6,140     5,936 | -3%     7,131 | 16% 
           /fortunes  3.5      raw        -      256           6,207     6,076 | -2%     7,231 | 16% 

               /json  3.5        -        -       32          12,232    11,614 | -5%    16,832 | 38% 
               /json  3.5        -        -       64          17,214    17,481 |  2%    34,090 | 98% 
               /json  3.5        -        -      128          17,793    15,896 |-11%    33,126 | 86% 
               /json  3.5        -        -      256          18,839    16,302 |-13%    33,638 | 79% 

          /plaintext  3.5        -        -       32          17,574    14,142 |-20%    30,872 | 76% 
          /plaintext  3.5        -        -       64          17,208    14,762 |-14%    30,303 | 76% 
          /plaintext  3.5        -        -      128          17,866    16,071 |-10%    30,337 | 70% 
          /plaintext  3.5        -        -      256          17,130    15,613 | -9%    31,626 | 85% 

  /queries/{queries}  3.5      orm        5      256           1,767     1,675 | -5%     1,853 |  5% 
  /queries/{queries}  3.5      orm       10      256             936       925 | -1%       956 |  2% 
  /queries/{queries}  3.5      orm       20      256             489       481 | -2%       497 |  2% 
  /queries/{queries}  3.5      raw        5      256           4,893     4,727 | -3%     5,772 | 18% 
  /queries/{queries}  3.5      raw       10      256           3,422     3,407 | -0%     3,695 |  8% 
  /queries/{queries}  3.5      raw       20      256           2,138     2,094 | -2%     2,129 | -0% 

  /updates/{queries}  3.5      orm        5      256             864       871 |  1%       876 |  1% 
  /updates/{queries}  3.5      orm       10      256             413       447 |  8%       444 |  7% 
  /updates/{queries}  3.5      orm       20      256             214       226 |  5%       236 | 10% 
  /updates/{queries}  3.5      raw        5      256           2,932     2,830 | -3%     3,004 |  2% 
  /updates/{queries}  3.5      raw       10      256           1,826     1,754 | -4%     1,724 | -6% 
  /updates/{queries}  3.5      raw       20      256           1,000       973 | -3%     1,062 |  6% 

                 /db  3.6      orm        -       32           4,934     4,579 | -7%     5,747 | 16% 
                 /db  3.6      orm        -       64           5,087     4,610 | -9%     5,751 | 13% 
                 /db  3.6      orm        -      128           5,127     4,813 | -6%     5,901 | 15% 
                 /db  3.6      orm        -      256           5,274     4,614 |-13%     5,845 | 11% 
                 /db  3.6      raw        -       32           7,149     6,633 | -7%     9,127 | 28% 
                 /db  3.6      raw        -       64           7,135     7,081 | -1%     9,529 | 34% 
                 /db  3.6      raw        -      128           7,458     7,057 | -5%     9,705 | 30% 
                 /db  3.6      raw        -      256           7,497     7,042 | -6%    10,028 | 34% 

           /fortunes  3.6      orm        -       32           3,466     2,004 |-42%     3,351 | -3% 
           /fortunes  3.6      orm        -       64           3,927     3,781 | -4%     4,519 | 15% 
           /fortunes  3.6      orm        -      128           3,863     3,879 |  0%     4,606 | 19% 
           /fortunes  3.6      orm        -      256           4,036     4,042 |  0%     4,486 | 11% 
           /fortunes  3.6      raw        -       32           4,930     4,602 | -7%     5,931 | 20% 
           /fortunes  3.6      raw        -       64           4,984     4,927 | -1%     6,194 | 24% 
           /fortunes  3.6      raw        -      128           5,263     5,198 | -1%     6,386 | 21% 
           /fortunes  3.6      raw        -      256           5,423     5,346 | -1%     6,553 | 21% 

               /json  3.6        -        -       32          11,933     6,674 |-44%    22,730 | 90% 
               /json  3.6        -        -       64          14,983    14,379 | -4%    26,269 | 75% 
               /json  3.6        -        -      128          15,759    14,554 | -8%    25,988 | 65% 
               /json  3.6        -        -      256          15,933    14,352 |-10%    25,778 | 62% 

          /plaintext  3.6        -        -       32          12,334    13,836 | 12%    24,245 | 97% 
          /plaintext  3.6        -        -       64          14,767    14,098 | -5%    24,506 | 66% 
          /plaintext  3.6        -        -      128          15,293    13,669 |-11%    23,282 | 52% 
          /plaintext  3.6        -        -      256          14,769    13,812 | -6%    24,649 | 67% 

  /queries/{queries}  3.6      orm        5      256           1,638     1,606 | -2%     1,684 |  3% 
  /queries/{queries}  3.6      orm       10      256             827       881 |  7%       965 | 17% 
  /queries/{queries}  3.6      orm       20      256             436       464 |  6%       486 | 11% 
  /queries/{queries}  3.6      raw        5      256           4,503     4,437 | -1%     5,639 | 25% 
  /queries/{queries}  3.6      raw       10      256           3,229     3,091 | -4%     3,571 | 11% 
  /queries/{queries}  3.6      raw       20      256           2,009     2,022 |  1%     2,252 | 12% 

  /updates/{queries}  3.6      orm        5      256             829       830 |  0%       858 |  3% 
  /updates/{queries}  3.6      orm       10      256             405       451 | 11%       450 | 11% 
  /updates/{queries}  3.6      orm       20      256             223       229 |  3%       198 |-11% 
  /updates/{queries}  3.6      raw        5      256           2,800     2,763 | -1%     3,076 | 10% 
  /updates/{queries}  3.6      raw       10      256           1,744     1,724 | -1%     1,869 |  7% 
  /updates/{queries}  3.6      raw       20      256             959     1,000 |  4%     1,053 | 10%
```
